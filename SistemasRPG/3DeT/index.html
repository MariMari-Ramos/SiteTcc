<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ficha 3DeT - Estilo D&D</title>
    <style>
        :root {
            --primary: #FF5459;
            --teal: #32B8C6;
            --background: #F5F5F5;
            --surface: #fff;
            --text: #1F2121;
            --gray-light: #e3e3e3;
            --gray-mid: #aaa;
            --border: #c9c5c5;
            --radius: 14px;
            --shadow: 0 2px 14px rgba(0,0,0,0.09);
            --header-gradient: linear-gradient(90deg, #FF5459 60%, #32B8C6 100%);
            --focus: 0 0 0 3px #32B8C680;
        }

        * {
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', 'Geist', -apple-system, BlinkMacSystemFont, 'Segoe UI', Arial, sans-serif;
            background: var(--background);
            color: var(--text);
            margin: 0;
            padding: 0;
        }

        .main-header {
            background: var(--header-gradient);
            color: #fff;
            padding: 20px 30px;
            display: flex;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 3px 14px rgba(255, 84, 89, 0.15);
            justify-content: space-between;
        }

        .main-header .logo {
            font-size: 2.2rem;
            margin-right: 16px;
        }

        .main-header h1 {
            margin: 0;
            font-size: 1.6rem;
            font-weight: 600;
            letter-spacing: -0.5px;
            flex: 1;
        }

        .nav-pages {
            display: flex;
            gap: 11px;
        }

        .nav-dot {
            height: 14px;
            width: 14px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.4);
            transition: all 0.22s;
            cursor: pointer;
            border: 2px solid transparent;
        }

        .nav-dot:hover {
            background: rgba(255, 255, 255, 0.7);
        }

        .nav-dot.active {
            background: #fff;
            border-color: var(--teal);
            transform: scale(1.3);
        }

        main {
            max-width: 900px;
            margin: 30px auto 80px;
            padding: 20px;
        }

        .page {
            display: none;
            animation: fadeIn 0.3s ease-in;
        }

        .page.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .card {
            background: var(--surface);
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            margin-bottom: 20px;
            border-left: 6px solid var(--primary);
            padding: 20px 25px;
            transition: all 0.2s;
        }

        .card:hover {
            box-shadow: 0 6px 24px rgba(255, 84, 89, 0.15);
            transform: translateY(-2px);
        }

        .card--teal {
            border-left-color: var(--teal);
        }

        .card--gray {
            border-left-color: var(--gray-mid);
        }

        .card h2 {
            margin: 0 0 15px 0;
            font-size: 1.4rem;
            font-weight: 600;
            color: var(--primary);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .card h3 {
            margin: 15px 0 10px 0;
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--text);
        }

        .form-group {
            margin-bottom: 18px;
        }

        label {
            display: block;
            font-weight: 500;
            margin-bottom: 6px;
            color: var(--text);
            font-size: 0.95rem;
        }

        input[type="text"],
        input[type="number"],
        select,
        textarea {
            width: 100%;
            padding: 11px 14px;
            border: 2px solid var(--border);
            border-radius: 8px;
            font-size: 1rem;
            background: var(--gray-light);
            color: var(--text);
            transition: all 0.2s;
            font-family: inherit;
        }

        input:focus,
        select:focus,
        textarea:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: var(--focus);
            background: #fff;
        }

        .attribute-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .attribute-box {
            text-align: center;
            padding: 15px;
            background: var(--gray-light);
            border-radius: 10px;
            border: 2px solid var(--border);
        }

        .attribute-box label {
            font-weight: 600;
            color: var(--primary);
            font-size: 0.9rem;
            text-transform: uppercase;
        }

        .attribute-box input {
            text-align: center;
            font-size: 1.3rem;
            font-weight: 600;
            margin-top: 5px;
        }

        .calculated-value {
            background: var(--primary);
            color: #fff;
            padding: 8px 12px;
            border-radius: 6px;
            font-weight: 600;
            display: inline-block;
            margin-top: 8px;
            font-size: 0.95rem;
        }

        .skill-item,
        .advantage-item {
            background: #fff;
            border: 2px solid var(--border);
            border-radius: 10px;
            padding: 12px 15px;
            margin-bottom: 12px;
            display: flex;
            align-items: flex-start;
            gap: 12px;
            transition: all 0.2s;
            cursor: pointer;
        }

        .skill-item:hover,
        .advantage-item:hover {
            border-color: var(--primary);
            background: #fff;
            box-shadow: 0 2px 12px rgba(255, 84, 89, 0.1);
        }

        .skill-item input[type="checkbox"],
        .advantage-item input[type="checkbox"] {
            width: 20px;
            height: 20px;
            cursor: pointer;
            accent-color: var(--primary);
            flex-shrink: 0;
            margin-top: 2px;
        }

        .skill-content,
        .advantage-content {
            flex: 1;
        }

        .skill-name,
        .advantage-name {
            font-weight: 600;
            color: var(--text);
            font-size: 1.05rem;
            margin-bottom: 4px;
        }

        .skill-description,
        .advantage-description {
            font-size: 0.9rem;
            color: #666;
            line-height: 1.5;
        }

        .btn-navigation {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
            gap: 15px;
        }

        button {
            background: var(--primary);
            color: #fff;
            border: none;
            border-radius: 10px;
            padding: 13px 28px;
            font-size: 1.05rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            box-shadow: var(--shadow);
            font-family: inherit;
        }

        button:hover {
            background: var(--teal);
            transform: translateY(-2px);
            box-shadow: 0 4px 18px rgba(50, 184, 198, 0.25);
        }

        button:active {
            transform: translateY(0);
        }

        button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        button.btn-secondary {
            background: var(--gray-mid);
        }

        button.btn-secondary:hover {
            background: var(--gray-light);
            color: var(--text);
        }

        #d20-roller {
            position: fixed;
            right: 25px;
            bottom: 25px;
            z-index: 999;
            width: 60px;
            height: 60px;
            font-size: 2.2rem;
            border-radius: 50%;
            background: var(--primary);
            color: #fff;
            box-shadow: 0 4px 20px rgba(255, 84, 89, 0.4);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            border: none;
            padding: 0;
        }

        #d20-roller:hover {
            background: var(--teal);
            transform: scale(1.1) rotate(15deg);
        }

        .toast {
            position: fixed;
            left: 50%;
            bottom: 30px;
            transform: translateX(-50%);
            background: var(--primary);
            color: #fff;
            padding: 15px 40px;
            border-radius: 10px;
            font-weight: 600;
            font-size: 1.05rem;
            box-shadow: 0 4px 20px rgba(255, 84, 89, 0.4);
            opacity: 0;
            transition: opacity 0.3s;
            z-index: 1000;
            pointer-events: none;
        }

        .toast.show {
            opacity: 1;
        }

        .summary-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .summary-item {
            background: var(--gray-light);
            padding: 12px;
            border-radius: 8px;
            border-left: 4px solid var(--primary);
        }

        .summary-item strong {
            color: var(--primary);
            display: block;
            margin-bottom: 5px;
            font-size: 0.9rem;
        }

        @media (max-width: 768px) {
            .main-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 12px;
                padding: 15px 20px;
            }

            .main-header h1 {
                font-size: 1.3rem;
            }

            main {
                margin: 15px auto 70px;
                padding: 10px;
            }

            .card {
                padding: 15px;
            }

            .attribute-row {
                grid-template-columns: 1fr;
            }

            .btn-navigation {
                flex-direction: column;
            }

            button {
                width: 100%;
            }

            #d20-roller {
                right: 15px;
                bottom: 15px;
                width: 50px;
                height: 50px;
                font-size: 1.8rem;
            }
        }
    </style>
</head>
<body>
    <header class="main-header">
        <div style="display: flex; align-items: center;">
            <span class="logo">üé≤</span>
            <h1>Ficha 3DeT ‚Äî Estilo D&D</h1>
        </div>
        <nav class="nav-pages">
            <span class="nav-dot active" data-page="1"></span>
            <span class="nav-dot" data-page="2"></span>
            <span class="nav-dot" data-page="3"></span>
            <span class="nav-dot" data-page="4"></span>
            <span class="nav-dot" data-page="5"></span>
            <span class="nav-dot" data-page="6"></span>
            <span class="nav-dot" data-page="7"></span>
        </nav>
    </header>
<form id="character-form" action="3d&t.php" method="POST">
    <input type="hidden" id="pericias-json" name="pericias">
    <main>
        <!-- P√°gina 1: Informa√ß√µes B√°sicas -->
        <div class="page active" id="page-1">
            <div class="card">
                <h2>üìã Informa√ß√µes B√°sicas</h2>
                <div class="form-group">
                    <label for="char-name">Nome do Personagem</label>
                    <input type="text" name="char-name" id="char-name" placeholder="Digite o nome do personagem">
                </div>
                <div class="form-group">
                    <label for="char-archetype">Arqu√©tipo
                        <button type="button" onclick="toggleArchetypeInfo()" style="background: var(--teal); padding: 8px 12px; font-size: 0.9rem; border-radius: 50%; width: 32px; height: 32px; display: inline-flex; align-items: center; justify-content: center; margin-left: 10px;">‚ùì</button>
                    </label>
                    <div id="archetype-info" style="display: none; background: var(--gray-light); padding: 15px; border-radius: 8px; margin-bottom: 15px; border-left: 4px solid var(--teal);">
                        <strong>üí° O que s√£o Arqu√©tipos?</strong>
                        <p style="margin: 10px 0 0 0; line-height: 1.6;">Arqu√©tipos funcionam como um ponto de partida para criar seu personagem. Eles ajudam quando voc√™ ainda n√£o sabe exatamente quem ele √© ou de onde veio.</p>
                        <p style="margin: 10px 0 0 0; line-height: 1.6;">Um arqu√©tipo representa o tipo de ser que seu personagem √©: pode ser um povo diferente dos humanos, uma etnia espec√≠fica dentro de uma esp√©cie, um ser artificial, fant√°stico, alien√≠gena ou sobrenatural.</p>
                        <p style="margin: 10px 0 0 0; line-height: 1.6;">Voc√™ n√£o √© obrigado a escolher um arqu√©tipo ‚Äî por√©m, usar um ajuda bastante, pois j√° oferece uma base pronta, com peda√ßos de hist√≥ria, cultura e at√© partes da constru√ß√£o do personagem.</p>
                    </div>
                    <select id="char-archetype" name="char-archetype">
                        <option value="">Selecione um arqu√©tipo...</option>
                    </select>
                </div>
            </div>

            <div class="card card--teal">
                <h2>üí™ Atributos
                    <button type="button" onclick="toggleAttributesInfo()" style="background: var(--teal); padding: 8px 12px; font-size: 0.9rem; border-radius: 50%; width: 32px; height: 32px; display: inline-flex; align-items: center; justify-content: center; margin-left: 10px;">‚ùì</button>
                </h2>
                <div id="attributes-info" style="display: none; background: var(--gray-light); padding: 15px; border-radius: 8px; margin-bottom: 15px; border-left: 4px solid var(--teal);">
                    <strong>üí° O que s√£o Atributos?</strong>
                    <p style="margin: 10px 0 0 0; line-height: 1.6;">Os atributos s√£o os tra√ßos fundamentais do personagem ‚Äî a base de tudo o que ele consegue fazer. Eles v√£o de 0 a 5, e quanto maior o valor, melhor o desempenho.</p>
                    <p style="margin: 10px 0 0 0; line-height: 1.6;">Durante a cria√ß√£o do personagem, nenhum atributo pode passar de 5, mesmo que voc√™ tenha pontos sobrando. Por√©m, ap√≥s ganhar experi√™ncia, √© poss√≠vel aumentar esse limite.</p>
                    <p style="margin: 10px 0 0 0; line-height: 1.6;">Algumas vantagens podem elevar um atributo temporariamente acima de 5, mas apenas enquanto o efeito durar ‚Äî depois, o valor volta ao normal.</p>
                </div>
                <div class="attribute-row">
                    <div class="attribute-box">
                        <label for="attr-poder">Poder</label>
                        <input type="number" id="attr-poder" name="attr-poder" value="0" min="0" max="10">
                        <div class="calculated-value">PA: <span id="calc-pa">0</span></div>
                    </div>
                    <div class="attribute-box">
                        <label for="attr-habilidade">Habilidade</label>
                        <input type="number" id="attr-habilidade" name="attr-habilidade" value="0" min="0" max="10">
                        <div class="calculated-value">PM: <span id="calc-pm">0</span></div>
                    </div>
                    <div class="attribute-box">
                        <label for="attr-resistencia">Resist√™ncia</label>
                        <input type="number" id="attr-resistencia" name="attr-resistencia" value="0" min="0" max="10">
                        <div class="calculated-value">PV: <span id="calc-pv">0</span></div>
                    </div>
                </div>
            </div>

            <div class="btn-navigation">
                <button type="button" class="btn-secondary" disabled>‚Üê Anterior</button>
                <button type="button" onclick="goToPage(2)">Pr√≥xima ‚Üí</button>
            </div>
        </div>

        <!-- P√°gina 2: Per√≠cias -->
        <div class="page" id="page-2">
            <div class="card">
                <h2>üéØ Per√≠cias
                    <button type="button" onclick="toggleSkillsInfo()" style="background: var(--teal); padding: 8px 12px; font-size: 0.9rem; border-radius: 50%; width: 32px; height: 32px; display: inline-flex; align-items: center; justify-content: center; margin-left: 10px;">‚ùì</button>
                </h2>
                <div id="skills-info" style="display: none; background: var(--gray-light); padding: 15px; border-radius: 8px; margin-bottom: 15px; border-left: 4px solid var(--teal);">
                    <strong>üí° Dica:</strong> Se estiver com uma per√≠cia selecionada e precisar rolar esse atributo, voc√™ pode rolar com mais um dado!
                </div>
                <p>Selecione as per√≠cias do seu personagem:</p>
                <div id="skills-container"></div>
            </div>

            <div class="btn-navigation">
                <button type="button" onclick="goToPage(1)">‚Üê Anterior</button>
                <button type="button" onclick="goToPage(3)">Pr√≥xima ‚Üí</button>
            </div>
        </div>

        <!-- P√°gina 3: Vantagens Ofensivas -->
        <div class="page" id="page-3">
            <div class="card">
                <h2>‚öîÔ∏è Vantagens Ofensivas
                    <button type="button" onclick="toggleAdvantagesInfo()" style="background: var(--teal); padding: 8px 12px; font-size: 0.9rem; border-radius: 50%; width: 32px; height: 32px; display: inline-flex; align-items: center; justify-content: center; margin-left: 10px;">‚ùì</button>
                </h2>
                <div id="advantages-info" style="display: none; background: var(--gray-light); padding: 15px; border-radius: 8px; margin-bottom: 15px; border-left: 4px solid var(--teal);">
                    <strong>üí° O que s√£o Vantagens?</strong>
                    <p style="margin: 10px 0 0 0; line-height: 1.6;">Al√©m de atributos e per√≠cias, voc√™ pode gastar seus pontos para comprar vantagens ‚Äî poderes, t√©cnicas especiais ou habilidades √∫nicas do seu her√≥i.</p>
                    <p style="margin: 10px 0 0 0; line-height: 1.6;">Cada vantagem d√° um efeito mec√¢nico espec√≠fico no jogo, mas a origem do poder √© totalmente livre:</p>
                    <p style="margin: 10px 0 0 0; line-height: 1.6;">‚Ä¢ Seu <strong>Alcance</strong> pode vir de arco e flechas, lasers dos olhos, bra√ßos el√°sticos, ondas sonoras etc.</p>
                    <p style="margin: 10px 0 0 0; line-height: 1.6;">‚Ä¢ Ser <strong>Carism√°tico</strong> pode vir de ser fofinho, inspirador, famoso ou manipulador.</p>
                    <p style="margin: 10px 0 0 0; line-height: 1.6;">A mec√¢nica √© fixa, mas a explica√ß√£o √© 100% narrativa, definida por voc√™.</p>
                </div>
                <p>Selecione as vantagens ofensivas do seu personagem:</p>
                <div id="offensive-container"></div>
            </div>

            <div class="btn-navigation">
                <button type="button" onclick="goToPage(2)">‚Üê Anterior</button>
                <button type="button" onclick="goToPage(4)">Pr√≥xima ‚Üí</button>
            </div>
        </div>

        <!-- P√°gina 4: Vantagens Defensivas -->
        <div class="page" id="page-4">
            <div class="card card--teal">
                <h2>üõ°Ô∏è Vantagens Defensivas
                    <button type="button" onclick="toggleDefensiveAdvantagesInfo()" style="background: var(--teal); padding: 8px 12px; font-size: 0.9rem; border-radius: 50%; width: 32px; height: 32px; display: inline-flex; align-items: center; justify-content: center; margin-left: 10px;">‚ùì</button>
                </h2>
                <div id="defensive-advantages-info" style="display: none; background: var(--gray-light); padding: 15px; border-radius: 8px; margin-bottom: 15px; border-left: 4px solid var(--teal);">
                    <strong>üí° O que s√£o Vantagens?</strong>
                    <p style="margin: 10px 0 0 0; line-height: 1.6;">Al√©m de atributos e per√≠cias, voc√™ pode gastar seus pontos para comprar vantagens ‚Äî poderes, t√©cnicas especiais ou habilidades √∫nicas do seu her√≥i.</p>
                    <p style="margin: 10px 0 0 0; line-height: 1.6;">Cada vantagem d√° um efeito mec√¢nico espec√≠fico no jogo, mas a origem do poder √© totalmente livre:</p>
                    <p style="margin: 10px 0 0 0; line-height: 1.6;">‚Ä¢ Seu <strong>Alcance</strong> pode vir de arco e flechas, lasers dos olhos, bra√ßos el√°sticos, ondas sonoras etc.</p>
                    <p style="margin: 10px 0 0 0; line-height: 1.6;">‚Ä¢ Ser <strong>Carism√°tico</strong> pode vir de ser fofinho, inspirador, famoso ou manipulador.</p>
                    <p style="margin: 10px 0 0 0; line-height: 1.6;">A mec√¢nica √© fixa, mas a explica√ß√£o √© 100% narrativa, definida por voc√™.</p>
                </div>
                <p>Selecione as vantagens defensivas do seu personagem:</p>
                <div id="defensive-container"></div>
            </div>

            <div class="btn-navigation">
                <button type="button" onclick="goToPage(3)">‚Üê Anterior</button>
                <button type="button" onclick="goToPage(5)">Pr√≥xima ‚Üí</button>
            </div>
        </div>

        <!-- P√°gina 5: Desvantagens -->
        <div class="page" id="page-5">
            <div class="card card--teal">
                <h2>‚ö†Ô∏è Desvantagens
                    <button type="button" onclick="toggleDisadvantagesInfo()" style="background: var(--teal); padding: 8px 12px; font-size: 0.9rem; border-radius: 50%; width: 32px; height: 32px; display: inline-flex; align-items: center; justify-content: center; margin-left: 10px;">‚ùì</button>
                </h2>
                <div id="disadvantages-info" style="display: none; background: var(--gray-light); padding: 15px; border-radius: 8px; margin-bottom: 15px; border-left: 4px solid var(--teal);">
                    <strong>üí° O que s√£o Desvantagens?</strong>
                    <p style="margin: 10px 0 0 0; line-height: 1.6;">Desvantagens s√£o problemas, limita√ß√µes ou obst√°culos que o personagem carrega. Elas dificultam sua vida, mas tamb√©m deixam seu her√≥i mais humano, interessante e marcante ‚Äî como nos filmes, games e HQs.</p>
                    <p style="margin: 10px 0 0 0; line-height: 1.6;">Elas n√£o te deixam pior, apenas tornam seu personagem diferente e mais profundo.</p>
                    <p style="margin: 10px 0 0 0; line-height: 1.6;">Al√©m disso, ao escolher desvantagens, voc√™ ganha pontos extras para gastar em atributos, vantagens e outras coisas importantes. Esse equil√≠brio ajuda a criar um personagem forte e bem constru√≠do.</p>
                </div>
                <p>Selecione as desvantagens do seu personagem:</p>
                <div id="disadvantage-container"></div>
            </div>

            <div class="btn-navigation">
                <button type="button" onclick="goToPage(4)">‚Üê Anterior</button>
                <button type="button" onclick="goToPage(6)">Pr√≥xima ‚Üí</button>
            </div>
        </div>

        <!-- P√°gina 6: Truques -->
        <div class="page" id="page-6">
            <div class="card">
                <h2>‚ú® Truques e T√©cnicas
                    <button type="button" onclick="toggleTricksInfo()" style="background: var(--teal); padding: 8px 12px; font-size: 0.9rem; border-radius: 50%; width: 32px; height: 32px; display: inline-flex; align-items: center; justify-content: center; margin-left: 10px;">‚ùì</button>
                </h2>
                <div id="tricks-info" style="display: none; background: var(--gray-light); padding: 15px; border-radius: 8px; margin-bottom: 15px; border-left: 4px solid var(--teal);">
                    <strong>üí° O que s√£o Truques e T√©cnicas?</strong>
                    <p style="margin: 10px 0 0 0; line-height: 1.6;">Um golpe lend√°rio, um jutsu secreto, uma magia proibida‚Ä¶ ou at√© um prato especial de um chef famoso ‚Äî tudo isso representa t√©cnicas √∫nicas, raras e poderosas que seu personagem pode aprender.</p>
                    <p style="margin: 10px 0 0 0; line-height: 1.6;">Essas t√©cnicas podem vir de diversas origens:</p>
                    <p style="margin: 10px 0 0 0; line-height: 1.6;">‚Ä¢ Ensinadas por um mestre escondido em um monast√©rio distante;</p>
                    <p style="margin: 10px 0 0 0; line-height: 1.6;">‚Ä¢ Passadas de gera√ß√£o em gera√ß√£o por ninjas infiltradores;</p>
                    <p style="margin: 10px 0 0 0; line-height: 1.6;">‚Ä¢ Criadas por um arquimago e guardadas em um grim√≥rio perdido;</p>
                    <p style="margin: 10px 0 0 0; line-height: 1.6;">‚Ä¢ Ou at√© desenvolvidas por um chef famoso num reality show culin√°rio.</p>
                    <p style="margin: 10px 0 0 0; line-height: 1.6;">Independente da forma, cada t√©cnica lend√°ria tem uma hist√≥ria, um estilo e um impacto poderoso, tornando o personagem mais marcante e √∫nico dentro do mundo.</p>
                </div>
                <p>Selecione os truques do seu personagem:</p>
                <div id="tricks-container"></div>
            </div>

            <div class="btn-navigation">
                <button type="button" onclick="goToPage(5)">‚Üê Anterior</button>
                <button type="button" onclick="goToPage(7)">Pr√≥xima ‚Üí</button>
            </div>
        </div>

        <!-- P√°gina 7: Resumo -->
        <div class="page" id="page-7">
            <div class="card card--gray">
                <h2>üìä Resumo do Personagem</h2>
                <div id="summary-container"></div>
            </div>

            <div class="btn-navigation">
                <button type="button" onclick="goToPage(6)">‚Üê Anterior</button>
                <button type="submit" onclick="showToast('Ficha completa! üéâ')">Finalizar</button>
            </div>
        </div>
    </main>
</form>
    <button type="button" id="d20-roller">üé≤</button>
    <div class="toast" id="toast"></div>

    <script>
        // ========== Game Data ==========
        const gameData = {
            archetypes: [
                'Humano', 'Aberrante', 'Abissal', 'Alien', 'An√£o', 'Anf√≠bio',
                'Celestial', 'Centauro', 'Ciborgue', 'Construto', 'Dallan', 'Elfo',
                'Fada', 'Fantasma', 'Goblin', 'Hynne', 'Kallyanach', 'Kemono',
                'Minotauro', 'Ogro', 'Osteon', 'Qareen', 'Sauroide', 'Vampiro'
            ],
            skills: [
                { name: 'Animais', description: 'Voc√™ sabe lidar com animais e monstros. Pode treinar, cuidar e montar neles.' },
                { name: 'Arte', description: 'Voc√™ sabe fazer performances art√≠sticas: Cantar, dan√ßar, tocar, cozinhar, desenhar.' },
                { name: 'Esporte', description: 'Voc√™ conhece esportes e suas regras. Sabe correr, nadar, escalar, saltar, fazer acrobacias.' },
                { name: 'Influ√™ncia', description: 'Voc√™ sabe convencer ou influenciar outras pessoas. Inclui diplomacia, lideran√ßa, intimida√ß√£o.' },
                { name: 'Luta', description: 'Voc√™ sabe atacar e se defender em combate, corpo a corpo ou √† dist√¢ncia.' },
                { name: 'Manha', description: 'Voc√™ sabe fazer truques e a√ß√µes furtivas ou ilegais: Roubar, sabotar, arrombar.' },
                { name: 'M√°quinas', description: 'Voc√™ sabe operar, consertar e criar m√°quinas e ve√≠culos. Tamb√©m lida com computadores.' },
                { name: 'Medicina', description: 'Voc√™ sabe cuidar da sa√∫de: primeiros socorros, diagn√≥sticos, tratar doen√ßas e venenos.' },
                { name: 'M√≠stica', description: 'Voc√™ entende magia e for√ßas sobrenaturais. Serve para atacar, se defender e estudar criaturas.' },
                { name: 'Percep√ß√£o', description: 'Voc√™ sabe observar e ouvir melhor o que acontece ao redor. Ajuda a notar detalhes.' },
                { name: 'Saber', description: 'Voc√™ sabe muitas coisas: ci√™ncias, idiomas, assuntos sobrenaturais e como pesquisar.' },
                { name: 'Sobreviv√™ncia', description: 'Voc√™ sabe viver em condi√ß√µes dif√≠ceis: encontrar comida, construir abrigo, rastrear.' }
            ],
            offensiveAdvantages: [
                { name: 'Acumulador', description: 'Quanto mais voc√™ acerta ataques, mais forte eles ficam. Gasta 2PM por acerto para aumentar o poder.' },
                { name: 'Alcance', description: 'Seus ataques e habilidades atingem mais longe. Pode atingir inimigos distantes sem penalidade.' },
                { name: 'Ataque Especial', description: 'Voc√™ pode gastar PM para melhorar seus ataques com efeitos diferentes (√Årea, Choque, Distante).' },
                { name: 'Brutal', description: 'Ao atacar inimigos, voc√™ recupera energia: Vida (1PV a cada 3 de dano) ou Mana (1PM a cada 3).' },
                { name: 'Desgaste', description: 'Depois de atacar, o alvo sofre dano extra na pr√≥xima rodada. Gasta 2PM por ataque.' },
                { name: 'Forte', description: 'Voc√™ √© mais forte: +2 em testes f√≠sicos. Pode gastar 2PM para garantir cr√≠tico.' },
                { name: 'Golpe Final', description: 'Voc√™ tem um ataque poderoso para inimigos quase derrotados. Gasta 3PM.' },
                { name: 'Inimigo', description: 'Voc√™ √© treinado contra um tipo espec√≠fico de criatura. Em testes contra eles, voc√™ consegue cr√≠tico.' },
                { name: 'Irresist√≠vel', description: 'Seus poderes s√£o mais dif√≠ceis de resistir. Gasta 2PM ou mais para aumentar a dificuldade.' },
                { name: 'Paralisia', description: 'Voc√™ pode impedir o alvo de agir. Gasta 2PM e vence a defesa do alvo para deix√°-lo imobilizado.' }
            ],
            defensiveAdvantages: [
                { name: 'Anula√ß√£o', description: 'Cancela temporariamente uma vantagem de um inimigo. Ele faz teste de Resist√™ncia para resistir.' },
                { name: 'Base', description: 'Voc√™ tem um ref√∫gio seguro. L√°, todos os testes t√™m Ganho e voc√™ recupera recursos.' },
                { name: 'Clone', description: 'Cria c√≥pias suas (2PM cada). Elas somem quando voc√™ √© atingido.' },
                { name: 'Confus√£o', description: 'Ataque que deixa o alvo confuso (escolhe alvos aleatoriamente). Custa 2PM.' },
                { name: 'Cura', description: 'Cura 1D PV por 2PM ou permite repetir testes de Resist√™ncia contra efeitos.' },
                { name: 'Regenera√ß√£o', description: 'Recupera PV todo turno: 1PV ou 3PV dependendo do n√≠vel.' },
                { name: 'Invis√≠vel', description: 'Gasta 3PM para ficar invis√≠vel. +Ganho em se esconder, inimigos t√™m Perda.' },
                { name: '+Vida', description: 'Cada ponto d√° +10 PV. Pode comprar v√°rias vezes para aumentar mais.' },
                { name: 'Vigoroso', description: 'Voc√™ √© mais resistente. +2 em testes de sa√∫de f√≠sica. Pode gastar 2PM para garantir cr√≠tico.' }
            ],
            disadvantages: [
                { name: 'Ambiente', description: 'S√≥ funciona bem em certo ambiente. Fora dele, pode ter Perda.' },
                { name: 'Amn√©sia', description: 'N√£o lembra quem √©. Mestre controla a ficha em segredo.' },
                { name: 'Antip√°tico', description: 'Perda em testes sociais. Sem cr√≠ticos.' },
                { name: 'Atrapalhado', description: 'Perda em testes de coordena√ß√£o/agilidade. Sem cr√≠ticos.' },
                { name: 'Fracote', description: 'Fraco fisicamente. Perda em testes de esfor√ßo. Sem cr√≠ticos.' },
                { name: 'Fr√°gil', description: 'Pouca resist√™ncia. Perda em sa√∫de/doen√ßas. Sem cr√≠ticos.' },
                { name: 'Fraqueza', description: 'Vulner√°vel a algo espec√≠fico (incomum ou comum).' },
                { name: 'Lento', description: 'Perda em iniciativa e gasta mais movimento.' },
                { name: 'Monstruoso', description: 'Apar√™ncia grotesca. Perda em iniciativa e sociais.' }
            ],
            tricks: [
                { name: 'Barreira M√≠stica', description: 'Defesa m√°gica (1PM). Pode usar M√≠stica no lugar de Luta.' },
                { name: 'Dobrar Elemento', description: 'Controla um elemento (fogo, √°gua, ar, terra, luz, trevas).' },
                { name: 'Golpes de Artes Marciais', description: 'Escolhe 2 golpes especiais como Derrubar, Finta, Atordoante.' },
                { name: 'Raio M√≠stico', description: 'Ataque m√°gico (1PM = ataque com M√≠stica ou Luta).' },
                { name: 'Super-Movimento', description: 'Andar em paredes/teto, pular muito longe, correr sobre √°gua.' }
            ]
        };

        // ========== Character State ==========
        const character = {
            name: '',
            archetype: '',
            poder: 0,
            habilidade: 0,
            resistencia: 0,
            skills: [],
            offensiveAdvantages: [],
            defensiveAdvantages: [],
            disadvantages: [],
            tricks: []
        };

        // ========== Initialize ==========
        function init() {
            // Populate archetypes
            const select = document.getElementById('char-archetype');
            gameData.archetypes.forEach(arch => {
                const option = document.createElement('option');
                option.value = arch;
                option.textContent = arch;
                select.appendChild(option);
            });

            // Populate skills
            const skillsContainer = document.getElementById('skills-container');
            gameData.skills.forEach((skill, index) => {
                const item = document.createElement('div');
                item.className = 'skill-item';
                item.innerHTML = `
                    <input type="checkbox" id="skill-${index}" value="${skill.name}">
                    <div class="skill-content">
                        <div class="skill-name">${skill.name}</div>
                        <div class="skill-description">${skill.description}</div>
                    </div>
                `;
                skillsContainer.appendChild(item);
            });

            // Populate offensive advantages
            const offensiveContainer = document.getElementById('offensive-container');
            gameData.offensiveAdvantages.forEach((adv, index) => {
                const item = document.createElement('div');
                item.className = 'advantage-item';
                item.innerHTML = `
                    <input type="checkbox" id="off-${index}" value="${adv.name}">
                    <div class="advantage-content">
                        <div class="advantage-name">${adv.name}</div>
                        <div class="advantage-description">${adv.description}</div>
                    </div>
                `;
                offensiveContainer.appendChild(item);
            });

            // Populate defensive advantages
            const defensiveContainer = document.getElementById('defensive-container');
            gameData.defensiveAdvantages.forEach((adv, index) => {
                const item = document.createElement('div');
                item.className = 'advantage-item';
                item.innerHTML = `
                    <input type="checkbox" id="def-${index}" value="${adv.name}">
                    <div class="advantage-content">
                        <div class="advantage-name">${adv.name}</div>
                        <div class="advantage-description">${adv.description}</div>
                    </div>
                `;
                defensiveContainer.appendChild(item);
            });

            // Populate disadvantages
            const disadvantageContainer = document.getElementById('disadvantage-container');
            gameData.disadvantages.forEach((dis, index) => {
                const item = document.createElement('div');
                item.className = 'advantage-item';
                item.innerHTML = `
                    <input type="checkbox" id="dis-${index}" value="${dis.name}">
                    <div class="advantage-content">
                        <div class="advantage-name">${dis.name}</div>
                        <div class="advantage-description">${dis.description}</div>
                    </div>
                `;
                disadvantageContainer.appendChild(item);
            });

            // Populate tricks
            const tricksContainer = document.getElementById('tricks-container');
            gameData.tricks.forEach((trick, index) => {
                const item = document.createElement('div');
                item.className = 'advantage-item';
                item.innerHTML = `
                    <input type="checkbox" id="trick-${index}" value="${trick.name}">
                    <div class="advantage-content">
                        <div class="advantage-name">${trick.name}</div>
                        <div class="advantage-description">${trick.description}</div>
                    </div>
                `;
                tricksContainer.appendChild(item);
            });

            // Add event listeners for attributes with immediate feedback
            const attrPoder = document.getElementById('attr-poder');
            const attrHabilidade = document.getElementById('attr-habilidade');
            const attrResistencia = document.getElementById('attr-resistencia');
            
            if (attrPoder) attrPoder.addEventListener('input', updateCalculations);
            if (attrHabilidade) attrHabilidade.addEventListener('input', updateCalculations);
            if (attrResistencia) attrResistencia.addEventListener('input', updateCalculations);
            
            // Initialize calculations on load
            updateCalculations();

            // Navigation dots
            document.querySelectorAll('.nav-dot').forEach(dot => {
                dot.addEventListener('click', function() {
                    const page = parseInt(this.dataset.page);
                    goToPage(page);
                });
            });

            // D20 roller
            document.getElementById('d20-roller').addEventListener('click', rollD20);
        }

        // ========== Functions ==========
        function updateCalculations() {
            const poder = parseInt(document.getElementById('attr-poder').value) || 0;
            const habilidade = parseInt(document.getElementById('attr-habilidade').value) || 0;
            const resistencia = parseInt(document.getElementById('attr-resistencia').value) || 0;

            document.getElementById('calc-pa').textContent = poder * 1;
            document.getElementById('calc-pm').textContent = habilidade * 5;
            document.getElementById('calc-pv').textContent = resistencia * 5;

            character.poder = poder;
            character.habilidade = habilidade;
            character.resistencia = resistencia;
            
            // Save to avoid losing data on navigation
            saveCurrentData();
        }

        function goToPage(pageNum) {
            // Save current data
            saveCurrentData();

            // Update pages
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            document.getElementById(`page-${pageNum}`).classList.add('active');

            // Update nav dots
            document.querySelectorAll('.nav-dot').forEach(dot => {
                dot.classList.remove('active');
                if (parseInt(dot.dataset.page) === pageNum) {
                    dot.classList.add('active');
                }
            });

            // If going to summary page, update it
            if (pageNum === 7) {
                updateSummary();
            }

            // Scroll to top
            window.scrollTo(0, 0);
        }

        function saveCurrentData() {
            character.name = document.getElementById('char-name').value;
            character.archetype = document.getElementById('char-archetype').value;

            // Save skills
            character.skills = [];
            document.querySelectorAll('#skills-container input[type="checkbox"]:checked').forEach(cb => {
                character.skills.push(cb.value);
            });

            // Save offensive advantages
            character.offensiveAdvantages = [];
            document.querySelectorAll('#offensive-container input[type="checkbox"]:checked').forEach(cb => {
                character.offensiveAdvantages.push(cb.value);
            });

            // Save defensive advantages
            character.defensiveAdvantages = [];
            document.querySelectorAll('#defensive-container input[type="checkbox"]:checked').forEach(cb => {
                character.defensiveAdvantages.push(cb.value);
            });

            // Save disadvantages
            character.disadvantages = [];
            document.querySelectorAll('#disadvantage-container input[type="checkbox"]:checked').forEach(cb => {
                character.disadvantages.push(cb.value);
            });

            // Save tricks
            character.tricks = [];
            document.querySelectorAll('#tricks-container input[type="checkbox"]:checked').forEach(cb => {
                character.tricks.push(cb.value);
            });
        }

        function updateSummary() {
            const container = document.getElementById('summary-container');
            const pa = character.poder * 1;
            const pm = character.habilidade * 5;
            const pv = character.resistencia * 5;

            container.innerHTML = `
                <div class="summary-grid">
                    <div class="summary-item">
                        <strong>Nome</strong>
                        ${character.name || 'N√£o definido'}
                    </div>
                    <div class="summary-item">
                        <strong>Arqu√©tipo</strong>
                        ${character.archetype || 'N√£o definido'}
                    </div>
                    <div class="summary-item">
                        <strong>Poder</strong>
                        ${character.poder} (PA: ${pa})
                    </div>
                    <div class="summary-item">
                        <strong>Habilidade</strong>
                        ${character.habilidade} (PM: ${pm})
                    </div>
                    <div class="summary-item">
                        <strong>Resist√™ncia</strong>
                        ${character.resistencia} (PV: ${pv})
                    </div>
                </div>
                
                <h3>Per√≠cias Selecionadas (${character.skills.length})</h3>
                <p>${character.skills.length > 0 ? character.skills.join(', ') : 'Nenhuma per√≠cia selecionada'}</p>
                
                <h3>Vantagens Ofensivas (${character.offensiveAdvantages.length})</h3>
                <p>${character.offensiveAdvantages.length > 0 ? character.offensiveAdvantages.join(', ') : 'Nenhuma vantagem ofensiva selecionada'}</p>
                
                <h3>Vantagens Defensivas (${character.defensiveAdvantages.length})</h3>
                <p>${character.defensiveAdvantages.length > 0 ? character.defensiveAdvantages.join(', ') : 'Nenhuma vantagem defensiva selecionada'}</p>
                
                <h3>Desvantagens (${character.disadvantages.length})</h3>
                <p>${character.disadvantages.length > 0 ? character.disadvantages.join(', ') : 'Nenhuma desvantagem selecionada'}</p>
                
                <h3>Truques (${character.tricks.length})</h3>
                <p>${character.tricks.length > 0 ? character.tricks.join(', ') : 'Nenhum truque selecionado'}</p>
            `;
        }

        function rollD20() {
            const result = Math.floor(Math.random() * 20) + 1;
            let message = `üé≤ Resultado: ${result}`;
            
            if (result === 20) {
                message += ' - CR√çTICO! üéâ';
            } else if (result === 1) {
                message += ' - Falha Cr√≠tica! üíÄ';
            }
            
            showToast(message);
        }

        function showToast(message) {
            const toast = document.getElementById('toast');
            toast.textContent = message;
            toast.classList.add('show');
            setTimeout(() => {
                toast.classList.remove('show');
            }, 3000);
        }

        function toggleSkillsInfo() {
            const infoDiv = document.getElementById('skills-info');
            if (infoDiv.style.display === 'none') {
                infoDiv.style.display = 'block';
            } else {
                infoDiv.style.display = 'none';
            }
        }

        function toggleArchetypeInfo() {
            const infoDiv = document.getElementById('archetype-info');
            if (infoDiv.style.display === 'none') {
                infoDiv.style.display = 'block';
            } else {
                infoDiv.style.display = 'none';
            }
        }

        function toggleDisadvantagesInfo() {
            const infoDiv = document.getElementById('disadvantages-info');
            if (infoDiv.style.display === 'none') {
                infoDiv.style.display = 'block';
            } else {
                infoDiv.style.display = 'none';
            }
        }

        function toggleAdvantagesInfo() {
            const infoDiv = document.getElementById('advantages-info');
            if (infoDiv.style.display === 'none') {
                infoDiv.style.display = 'block';
            } else {
                infoDiv.style.display = 'none';
            }
        }

        function toggleTricksInfo() {
            const infoDiv = document.getElementById('tricks-info');
            if (infoDiv.style.display === 'none') {
                infoDiv.style.display = 'block';
            } else {
                infoDiv.style.display = 'none';
            }
        }

        function toggleDefensiveAdvantagesInfo() {
            const infoDiv = document.getElementById('defensive-advantages-info');
            if (infoDiv.style.display === 'none') {
                infoDiv.style.display = 'block';
            } else {
                infoDiv.style.display = 'none';
            }
        }

        function toggleAttributesInfo() {
            const infoDiv = document.getElementById('attributes-info');
            if (infoDiv.style.display === 'none') {
                infoDiv.style.display = 'block';
            } else {
                infoDiv.style.display = 'none';
            }
        }

        // Initialize on load
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>
